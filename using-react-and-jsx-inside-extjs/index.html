<!DOCTYPE html>
<html lang="en-US">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="author" content="Trevor Brindle">
<meta name="description" content="Intro I won&rsquo;t even bother with my reasoning for doing this, because it&rsquo;s really not any different than the last frankenstein hack-job I did on ExtJS/Sencha Touch a while back. Long story short, I wrote an e-commerce app that grosses a few million a year, and don&rsquo;t have the bandwidth to rewrite it in newer technology. But I do want to be able to write React components, and share them across apps.">

<meta property="og:title" content="Using React&#43;JSX inside ExtJS" />
<meta property="og:description" content="Intro I won&rsquo;t even bother with my reasoning for doing this, because it&rsquo;s really not any different than the last frankenstein hack-job I did on ExtJS/Sencha Touch a while back. Long story short, I wrote an e-commerce app that grosses a few million a year, and don&rsquo;t have the bandwidth to rewrite it in newer technology. But I do want to be able to write React components, and share them across apps." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://trevorbrindle.com/using-react-and-jsx-inside-extjs/" />



<meta property="article:published_time" content="2017-06-15T13:36:00-05:00"/>

<meta property="article:modified_time" content="2017-06-15T13:36:00-05:00"/>












<title>


     Using React&#43;JSX inside ExtJS 

</title>
<link rel="canonical" href="http://trevorbrindle.com/using-react-and-jsx-inside-extjs/">







<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/default.min.css">




<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Ubuntu+Mono:400,400i,700,700i|Raleway:500">



    
    <link rel="stylesheet" href="http://trevorbrindle.com/css/reset.css?t=2018-03-07%2018%3a45%3a13.411396718%20%2b0000%20UTC%20m%3d%2b0.059023932">
    <link rel="stylesheet" href="http://trevorbrindle.com/css/pygments.css?t=2018-03-07%2018%3a45%3a13.411396718%20%2b0000%20UTC%20m%3d%2b0.059023932">
    <link rel="stylesheet" href="http://trevorbrindle.com/css/main.css?t=2018-03-07%2018%3a45%3a13.411396718%20%2b0000%20UTC%20m%3d%2b0.059023932">
    
        <link rel="stylesheet" href="http://trevorbrindle.com/css/override.css?t=2018-03-07%2018%3a45%3a13.411396718%20%2b0000%20UTC%20m%3d%2b0.059023932">
    




<link rel="shortcut icon"

    href="http://trevorbrindle.com/img/leaf.ico"

>




</head>


<body lang="en">

<section class="header">
    <div class="container">
        <div class="content">
            
                
                
                
                
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                
                <a href="http://trevorbrindle.com/"><img class="avatar" src="http://trevorbrindle.com/img/profile.jpg" srcset="http://trevorbrindle.com/img/profile.jpg 1x"></a>
            
            <a href="http://trevorbrindle.com/"><div class="name">Trevor Brindle</div></a>
            
            <nav>
                <ul>
                    
                </ul>
            </nav>
        </div>
    </div>
</section>

<section class="icons">
    <div class="container">
        <div class="content">

        
            <a href="//github.com/tabrindle" target="_blank" rel="noopener"><img class="icon" src="http://trevorbrindle.com/img/github.svg" alt="github" /></a>
        

        
            <a href="//twitter.com/vincekerrazzi" target="_blank" rel="noopener"><img class="icon" src="http://trevorbrindle.com/img/twitter.svg" alt="twitter" /></a>
        

        

        
            <a href="//linkedin.com/in/trevorbrindle" target="_blank" rel="noopener"><img class="icon" src="http://trevorbrindle.com/img/linkedin.svg" alt="linkedin" /></a>
        

        

        

        
            <a href="mailto:tabrindle@gmail.com"><img class="icon" src="http://trevorbrindle.com/img/email.svg" alt="email" /></a>
        

        
            <a href="http://trevorbrindle.com/index.xml"><img class="icon" src="http://trevorbrindle.com/img/rss.svg" alt="rss" /></a>
        
        
        </div>
    </div>
</section>


<section class="main post non-narrow zero-top-spacing">
    <div class="container">
        <div class="content">
            <div class="front-matter">
                <div class="title-container">
                    <div class="page-heading">

    Using React&#43;JSX inside ExtJS

</div>

                    <div class="initials"><a href="http://trevorbrindle.com"></a></div>
                </div>
                <div class="meta">
                    
                    <div class="date" title='Thu Jun 15 2017 13:36:00 -0500'>Jun 15, 2017</div>
                    
                    
		    <div class="reading-time"><div class="middot"></div>3 minutes read</div>
                    
                </div>
            </div>
            <div class="markdown">
                

<h2 id="intro">Intro</h2>

<p>I won&rsquo;t even bother with my reasoning for doing this, because it&rsquo;s really not any different than the <a href="sencha-touch-extjs-with-es6">last frankenstein hack-job</a> I did on ExtJS/Sencha Touch a while back. Long story short, I wrote an e-commerce app that grosses a few million a year, and don&rsquo;t have the bandwidth to rewrite it in newer technology. But I do want to be able to write React components, and share them across apps. Including inside my Sencha apps. So here I go.</p>

<h2 id="setup">Setup</h2>

<p>The first step is to follow my old guide on using ES6+ in your app. Something like this:</p>

<ul>
<li><code>sencha generate app {APP_NAME} ~/{DIR}/{APP_NAME}</code></li>
<li><code>npm init</code></li>
<li><code>npm install babel-preset-env --save-dev</code></li>
<li>set up babel config in package.json</li>
<li>set up compile scripts in package.json</li>
<li>create your new ES6 folder</li>
<li>transpile</li>
</ul>

<p>Now we actually start adding the react parts. You&rsquo;ll need to install a few more things in your package.json to get this to work, and modify your babel config too.</p>

<p><code>npm install babel-preset-react --save-dev</code></p>

<p>This mostly allows us to transpile JSX. Next add this preset to your babel config:</p>

<pre><code>  &quot;babel&quot;: {
    &quot;presets&quot;: [
      &quot;react&quot;,
      [
        &quot;env&quot;,
        {
          &quot;targets&quot;: {
            &quot;browsers&quot;: [
              &quot;iOS &gt;= 8&quot;,
              &quot;Chrome &gt;=46&quot;
            ]
          },
          &quot;include&quot;: [
            &quot;transform-es2015-computed-properties&quot;
          ],
          &quot;loose&quot;: true,
          &quot;modules&quot;: false
        }
      ]
    ],
    &quot;comments&quot;: false
  },
</code></pre>

<p>Now to install React!</p>

<p><code>npm install react react-dom --save</code></p>

<p>This adds the React libraries to our dependencies, which actually get bundled in the final app. There are a couple ways to do this: if you are using webpack/rollup or some sort of bundler, you can include them there, but don&rsquo;t forget to also expose them as a global variable so that React and ReactDOM are available in window scope.</p>

<p>Easiest though is probably just to add them as scripts in your index.html, and as part of your app.json resources to bundle.</p>

<pre><code>&lt;script src=&quot;../node_modules/react/dist/react.min.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;../node_modules/react-dom/dist/react-dom.min.js&quot;&gt;&lt;/script&gt;
</code></pre>

<p>If you don&rsquo;t know how to make this work, you could always also just get them from a remote server, although I wouldn&rsquo;t recommend this. They aren&rsquo;t large scripts, but it will slow down startup.</p>

<pre><code>&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/react/15.5.4/react.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/react/15.5.4/react-dom.js&quot;&gt;&lt;/script&gt;
</code></pre>

<p>The only thing that is left is to define a user extension component to use anywhere we want to use JSX for the component templates.</p>

<pre><code>Ext.define('Ext.ux.ReactComponent', {
  extend: 'Ext.Component',
  xtype: 'ReactComponent',
  constructor(...args) {
    this.callParent(args);

    const render = data =&gt; ReactDOM.render(this.config.jsx(data), document.getElementById(this.getId()));

    this.on('painted', () =&gt; render(this.config.data));
    this.on('updatedata', (component, data) =&gt; render(data));
  }
});
</code></pre>

<p>What is happening here is essentially we are taking the jsx property we will define on our new components, pass it the data from the component, and render it when painted and when we update the data. There may be better ways to do this, but it didn&rsquo;t occur to me at the time of writing.</p>

<p>Now we can actually write something. Here is a simple test component, where we write some jsx, slap in some test data, and go.</p>

<pre><code>Ext.define('Shop.view.TestComponent', {
  extend: 'Ext.ux.ReactComponent',
  xtype: 'TestComponent',
  config: {
    data: [{
      foo: 1,
    }, {
      foo: 2,
    }],
    jsx: data =&gt; {
      return (
        &lt;div&gt;
          {data.map((val, idx) =&gt; &lt;div key={idx} &gt;foo: {val.foo}&lt;/div&gt;)}
        &lt;/div&gt;
      );
    }
  }
});
</code></pre>

<p>Bam. I got my React+JSX all up in your ExtJS.</p>

<p><em>Disclaimer</em> - Don&rsquo;t do this in production and cry because you broke something. I use this and my ES6 hack in production, but I wrote them. There is a reason that Sencha doesn&rsquo;t ship this with their products. It&rsquo;s very untested, and full of gotchas and holes in functionality.</p>

                <br>
		<p><a href="http://trevorbrindle.com/blog/">Back to posts</a></p>
            </div>
            <br>
            <div class="disqus">
                <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "trevorbrindle-com" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
        </div>
    </div>
</section>





  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
  

  <script type="text/javascript">
    hljs.initHighlightingOnLoad();
  </script>




</body>
</html>

